series: xenial
services:
  kibana:
    charm: "cs:~lazypower/trusty/kibana-0"
    num_units: 1
    options:
      dashboards: beats
    expose: true
    annotations:
      "gui-x": "985"
      "gui-y": "580"
  elasticsearch:
    charm: "cs:trusty/elasticsearch-15"
    num_units: 1
    annotations:
      "gui-x": "670"
      "gui-y": "580"
  swarm:
    charm: "cs:swarm-1"
    num_units: 2
    expose: true
    annotations:
      "gui-x": "-170"
      "gui-y": "380"
  dockerbeat:
    charm: "cs:~containers/dockerbeat-0"
    annotations:
      "gui-x": "360"
      "gui-y": "300"
  topbeat:
    charm: "cs:trusty/topbeat-2"
    annotations:
      "gui-x": "360"
      "gui-y": "690"
  filebeat:
    charm: "cs:trusty/filebeat-2"
    annotations:
      "gui-x": "360"
      "gui-y": "490"
  packetbeat:
    charm: "cs:~containers/packetbeat-4"
    annotations:
      "gui-x": "360"
      "gui-y": "900"
  consul:
    charm: "cs:~containers/trusty/consul-1"
    num_units: 1
    options:
      "bootstrap-expect": 1
    annotations:
      "gui-x": "-170"
      "gui-y": "780"
relations:
  - - "packetbeat:beats-host"
    - "consul:juju-info"
  - - "dockerbeat:beats-host"
    - "swarm:juju-info"
  - - "dockerbeat:elasticsearch"
    - "elasticsearch:client"
  - - "swarm:consul"
    - "consul:api"
  - - "topbeat:elasticsearch"
    - "elasticsearch:client"
  - - "filebeat:elasticsearch"
    - "elasticsearch:client"
  - - "filebeat:beats-host"
    - "swarm:juju-info"
  - - "topbeat:beats-host"
    - "swarm:juju-info"
  - - "topbeat:beats-host"
    - "consul:juju-info"
  - - "kibana:rest"
    - "elasticsearch:client"
  - - "filebeat:beats-host"
    - "consul:juju-info"
  - - "packetbeat:elasticsearch"
    - "elasticsearch:client"
